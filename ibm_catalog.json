{
  "products": [
    {
      "label": "Cloud foundation for security and observability",
      "name": "deploy-arch-ibm-core-security-svcs",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "support_ibm",
        "security",
        "logging_monitoring",
        "platform_engineering"
      ],
      "keywords": [
        "kms",
        "scc",
        "secrets manager",
        "keyprotect",
        "IaC",
        "infrastructure as code",
        "security and compliance center workload protection",
        "terraform",
        "solution",
        "secrets",
        "key protect",
        "compliance",
        "cspm",
        "cloud security posture management",
        "config aggregator",
        "app config"
      ],
      "short_description": "Deploy core security and other supporting services to get set up to manage the security compliance of the resources in your account.",
      "long_description": "Get IBM Cloud’s suite of core security services with a single deployment enabling you to securely manage keys and secrets and run security and compliance scans so that you always know the posture of the resources in your account. You can also take advantage of an event notification routing service that notifies you to critical events that occur in your IBM Cloud account and observability services that provide enterprise-grade monitoring and logging giving you operational visibility into the performance and health of your apps, services, and infrastructure.",
      "provider_name": "IBM",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/stack-ibm-core-security-services/main/reference-architectures/light-theme.svg",
      "offering_docs_url": "https://cloud.ibm.com/docs/security-hub?topic=security-hub-cloud-security",
      "support_details": "If you’re experiencing issues with this product, review the troubleshooting information available from the “Docs” link in the Related links section. If you can’t resolve your problem, click “Get help” in the related links and create a case.",
      "features": [
        {
          "title": "Creates an IBM Key Protect instance",
          "description": "Creates and configures an IBM Key Protect instance and creates root keys for IBM Cloud Object Storage, Event Notifications, and Secrets Manager."
        },
        {
          "title": "Creates an IBM Cloud Secrets Manager instance",
          "description": "Creates and configures an IBM Secrets Manager instance."
        },
        {
          "title": "Creates an App Configuration instance",
          "description": "Creates and configures an IBM Cloud App Configuration instance with the config aggregator feature enabled."
        },
        {
          "title": "Creates an Security and Compliance Center Workload Protection instance",
          "description": "Creates and configures an Security and Compliance Center Workload Protection instance with Cloud Security Posture Management (CSPM) enabled."
        },
        {
          "title": "Creates an IBM Cloud Object Storage instance",
          "description": "Creates and configures an IBM Cloud Object Storage instance and multiple Object Storage buckets that are encrypted by IBM Key Protect."
        },
        {
          "title": "Creates an IBM Cloud Event Notifications instance",
          "description": "Creates and configures an IBM Cloud Event Notifications instance with topics for Secrets Manager and Security and Compliance Center events."
        },
        {
          "title": "Creates service-to-service authorizations",
          "description": "Creates and configures service-to-service authorizations for the following IBM Cloud services: Key Protect, Event Notifications, Object Storage, Security and Compliance Center, and Secrets Manager."
        }
      ],
      "flavors": [
        {
          "label": "Click and go",
          "name": "click-and-go",
          "index": 1,
          "working_directory": "./",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "CIS IBM Cloud Foundations Benchmark v1.1.0",
                "profile_version": "1.1.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "service_name": "cloud-object-storage",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ]
            },
            {
              "service_name": "secrets-manager",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor",
                "crn:v1:bluemix:public:iam::::role:Operator"
              ]
            },
            {
              "service_name": "kms",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager"
              ]
            },
            {
              "service_name": "sysdig-secure",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Operator",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ]
            },
            {
              "service_name": "apprapp",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Operator",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ]
            },
            {
              "service_name": "event-notifications",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Operator",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ]
            }
          ],
          "architecture": {
            "features": [
              {
                "title": "Creates IBM Cloud core security services in a resource group",
                "description": "Creates IBM Cloud core security services in an existing resource group."
              },
              {
                "title": "Creates an IBM Key Protect instance",
                "description": "Creates and configures an IBM Key Protect instance and creates root keys for IBM Cloud Object Storage, Event Notifications, and Secrets Manager."
              },
              {
                "title": "Creates an IBM Cloud Secrets Manager instance",
                "description": "Create, lease, and centrally manage secrets that are used in your apps and services using IBM Secrets Manager instance."
              },
              {
                "title": "Configures an IBM Cloud Secrets Manager IAM credentials engine to an IBM Cloud Secrets Manager instance",
                "description": "Configures an IBM Secrets Manager IAM credentials engine to an IBM Cloud Secrets Manager instance."
              },
              {
                "title": "Creates an IBM Cloud App Configuration instance with Configuration Aggregator",
                "description": "Facilitate a Cloud Governance SME with up-to-date configuration data of IBM Cloud resources in one place so that comprehensive information is available for goverance and compliance initiatives."
              },
              {
                "title": "Creates a IBM Cloud Security and Compliance Center Workload Protection instance",
                "description": "Creates a Cloud-Native Application Protection Platform solution to manage your security and compliance posture, allowing you to monitor misconfigurations and detect and respond to vulnerabilities and threats in real-time."
              },
              {
                "title": "Creates an IBM Cloud Event Notifications instance",
                "description": "Deliver Email, SMS, Webhooks and Push Notifications for your IBM Cloud service events using IBM Event Notifications instance."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/stack-ibm-core-security-services/main/reference-architectures/core-security-services-architecture.svg",
                  "caption": "Cloud foundation for security and observability stack architecture",
                  "type": "image/svg+xml",
                  "thumbnail_url": "https://raw.githubusercontent.com/terraform-ibm-modules/stack-ibm-core-security-services/main/reference-architectures/core-security-services-architecture.svg"
                },
                "description": "The architecture of Cloud foundation for security and observability stack."
              }
            ]
          },
          "configuration": [
            {
              "key": "prefix",
              "type": "string",
              "description": "The prefix to add to all resources that this solution creates (e.g `prod`, `test`, `dev`). To skip using a prefix, set this value to null or an empty string. [Learn more](https://terraform-ibm-modules.github.io/documentation/#/prefix.md).",
              "required": true,
              "default_value": "dev",
              "random_string": {
                "length": 4
              },
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "Prefix must begin with a lowercase letter and may contain only lowercase letters, digits, and hyphens '-'. It must not end with a hyphen('-'), and cannot contain consecutive hyphens ('--'). It should not exceed 16 characters.",
                  "value": "^$|^__NULL__$|^[a-z](?!.*--)(?:[a-z0-9-]{0,14}[a-z0-9])?$"
                }
              ]
            },
            {
              "key": "region",
              "type": "string",
              "default_value": "us-south",
              "description": "The region where the resources are created.",
              "required": true,
              "options": [
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Sao Paulo (br-sao)",
                  "value": "br-sao"
                }
              ]
            },
            {
              "display_name": "resource_group",
              "key": "existing_resource_group_name",
              "type": "string",
              "default_value": "Default",
              "description": "The name of an existing resource group to provision the resources. [Learn more](https://cloud.ibm.com/docs/account?topic=account-rgs&interface=ui#create_rgs) about how to create a resource group.",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "enable_platform_metrics",
              "type": "boolean",
              "default_value": false,
              "description": "Setting this to true will enable platform metrics for the Cloud Monitoring instance. NOTE: You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location.",
              "required": false
            },
            {
              "key": "logs_routing_tenant_regions",
              "type": "array",
              "default_value": [],
              "description": "Pass a list of regions to create a tenant that is targeted to the Cloud Logs instance created by this solution. To manage platform logs that are generated by IBM Cloud® services in a region of IBM Cloud, you must create a tenant in each region that you operate. Leave the list empty if you don't want to create any tenants.",
              "required": false
            },
            {
              "key": "existing_kms_instance_crn",
              "type": "string",
              "default_value": "__NULL__",
              "description": "The CRN of an existing KMS instance to use in this solution. If not set, a new Key Protect instance is provisioned.",
              "required": false,
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_kms_instance_crn' is not valid.",
                  "value": "^__NULL__$|^crn:(.*:){3}(kms|hs-crypto):(.*:){2}[0-9a-fA-F]{8}(?:-[0-9a-fA-F]{4}){3}-[0-9a-fA-F]{12}::$"
                }
              ]
            },
            {
              "key": "key_protect_plan",
              "type_metadata": "string",
              "required": false,
              "options": [
                {
                  "description": "Key versions are created whenever a key is created or imported, and whenever an existing key is rotated. A key that has been rotated five times, for example, has six versions (five versions created by rotations plus the initial version). This plan does not offer cross-regional resiliency.",
                  "displayname": "Standard",
                  "value": "tiered-pricing"
                },
                {
                  "description": "Designed for users who require enhanced disaster recovery from cross-region availability. In the event a region is unavailable, requests will automatically route to the replicated data in the cross-region, ensuring key functionality persists. Base cost is charged once per region where you manage at least one key under this plan (regardless of the number of instances created in that region).",
                  "displayname": "Cross-region Resiliency",
                  "value": "cross-region-resiliency"
                }
              ]
            },
            {
              "key": "cloud_monitoring_plan",
              "type_metadata": "string",
              "options": [
                {
                  "description": "Pay-as-you-go pricing based on usage.",
                  "displayname": "Graduated Tier",
                  "value": "graduated-tier"
                },
                {
                  "description": "Free tier with limited features.",
                  "displayname": "Lite",
                  "value": "lite"
                }
              ]
            },
            {
              "key": "event_notifications_email_list",
              "type": "array",
              "default_value": [],
              "description": "List of emails to configure event notifications.",
              "required": false
            },
            {
              "key": "existing_event_notifications_instance_crn",
              "type": "string",
              "default_value": "__NULL__",
              "description": "The CRN of existing event notification instance. If not supplied, a new instance is created.",
              "required": false,
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_event_notifications_instance_crn' is not valid.",
                  "value": "^__NULL__$|^crn:(.*:){3}event-notifications:(.*:){2}[0-9a-fA-F]{8}(?:-[0-9a-fA-F]{4}){3}-[0-9a-fA-F]{12}::$"
                }
              ]
            },
            {
              "key": "existing_secrets_manager_crn",
              "type": "string",
              "default_value": "__NULL__",
              "description": "The CRN of an existing IBM Cloud Secrets Manager instance to use in this solution. If not set, a new Secrets Manager instance is provisioned.",
              "required": false,
              "value_constraints": [
                {
                  "type": "regex",
                  "description": "The value provided for 'existing_secrets_manager_crn' is not valid.",
                  "value": "^__NULL__$|^crn:(.*:){3}secrets-manager:(.*:){2}[0-9a-fA-F]{8}(?:-[0-9a-fA-F]{4}){3}-[0-9a-fA-F]{12}::$"
                }
              ]
            },
            {
              "key": "secrets_manager_service_plan",
              "description": "The pricing plan to use when provisioning a Secrets Manager instance. [Learn more](https://cloud.ibm.com/docs/secrets-manager?topic=secrets-manager-create-instance&interface=ui#upgrade-instance-standard).",
              "type_metadata": "string",
              "virtual": true,
              "required": true,
              "default_value": "standard",
              "options": [
                {
                  "description": "Centrally manage secrets in a dedicated instance. Unlimited Secrets Manager instances per IBM Cloud account. Unlimited access to all service capabilities.",
                  "displayname": "Standard",
                  "value": "standard"
                },
                {
                  "description": "Choose this option only if your account does not already have a Trial plan instance. Only one Trial plan instance is allowed per account. After it expires, upgrade to the Standard plan to keep using Secrets Manager.",
                  "displayname": "Trial (30 days)",
                  "value": "trial"
                }
              ]
            },
            {
              "display_name": "disable_secrets_manager_iam_credentials_engine",
              "key": "skip_secrets_manager_iam_auth_policy",
              "type": "boolean",
              "default_value": false,
              "description": "Whether to skip the creation of the IAM authorization policies required to enable the Secrets Manager IAM credentials engine. If set to false, policies will be created that grants the Secrets Manager instance 'Operator' access to the IAM identity service, and 'Groups Service Member Manage' access to the IAM groups service.",
              "required": false
            },
            {
              "key": "secrets_manager_secret_groups",
              "type": "array",
              "default_value": "[\n    {\n      secret_group_name        = \"General\"\n      secret_group_description = \"A general purpose secrets group with an associated access group which has a secrets reader role\"\n      create_access_group      = true\n      access_group_name        = \"general-secrets-group-access-group\"\n      access_group_roles       = [\"SecretsReader\"]\n    }\n  ]",
              "description": "Secret Manager secret group and access group configurations. If a prefix input variable is specified, it is added to the `access_group_name` value in the `<prefix>-value` format. If you do not wish to create any groups, set the value to `[]`. [Learn more](https://github.com/terraform-ibm-modules/terraform-ibm-secrets-manager/tree/main/solutions/fully-configurable/provisioning_secrets_groups.md).",
              "custom_config": {
                "type": "code_editor",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "app_config_plan",
              "type_metadata": "string",
              "required": false,
              "options": [
                {
                  "description": "This plan includes all App Configuration capabilities except configuration aggregation. Use for evaluation only. Not to be used for production. Lite plan services are deleted after 30 days of inactivity.",
                  "displayname": "Lite (30 Days)",
                  "value": "lite"
                },
                {
                  "description": "This plan includes property management and configuration aggregation. Feature flag capability is not included. There is no monthly instance cost. Aggregation is free. Pay only for property management entity IDs and API calls.",
                  "displayname": "Basic",
                  "value": "basic"
                },
                {
                  "description": "This plan includes feature flags in addition to property management and aggregation found in the Basic Plan.",
                  "displayname": "Standard",
                  "value": "standardv2"
                },
                {
                  "description": "This plan includes percentage rollout and segment targeting in addition to feature flags, property management and aggregation found in the Standard plan. This is the only plan that supports Key Management Service (KMS) encryption.",
                  "displayname": "Enterprise",
                  "value": "enterprise"
                }
              ]
            },
            {
              "key": "scc_workload_protection_service_plan",
              "type": "string",
              "type_metadata": "string",
              "required": false,
              "options": [
                {
                  "description": "The Graduated Tier plan for Workload Protection offers unified security and continuous compliance options for hosts, virtual machines, containers, OpenShift and Kubernetes, and multicloud environments.",
                  "displayname": "Graduated Tier",
                  "value": "graduated-tier"
                },
                {
                  "description": "The Free Trial plan enables you to try all of the Workload Protection capabilities available under the paid Graduated Tier plan. However, the Free Trial plan expires after 30 days, after which you have the option to upgrade to the Graduated Tier plan.",
                  "displayname": "Free Trial (30 Days)",
                  "value": "free-trial"
                }
              ]
            },
            {
              "key": "enterprise_id",
              "type": "string",
              "default_value": "__NULL__",
              "description": "If the account is an enterprise account and you want to scan sub-accounts for compliance, this value should be set to the enterprise ID (this is different to the account ID).",
              "required": false
            },
            {
              "key": "enterprise_account_group_ids_to_assign",
              "type": "array",
              "default_value": [
                "all"
              ],
              "description": "A list of enterprise account group IDs to assign the trusted profile template to in order for the accounts to be scanned for compliance. Supports passing the string 'all' in the list to assign to all account groups. Only applies if a value is being passed for `enterprise_id`.",
              "required": false
            },
            {
              "key": "enterprise_account_ids_to_assign",
              "type": "array",
              "default_value": [
                "all"
              ],
              "description": "A list of enterprise account IDs to assign the trusted profile template to in order for the accounts to be scanned. Supports passing the string 'all' in the list to assign to all accounts. Only applies if a value is being passed for `enterprise_id`.",
              "required": false
            }
          ],
          "outputs": [
            {
              "key": "key_management_service_instance_crn",
              "description": "The CRN of the Hyper Protect Crypto Service instance or Key Protect instance."
            },
            {
              "key": "secrets_manager_crn",
              "description": "The CRN of the Secrets Manager instance."
            },
            {
              "key": "app_config_crn",
              "description": "The CRN of the App Configuration instance."
            },
            {
              "key": "monitoring_crn",
              "description": "The CRN of the IBM Cloud Monitoring instance."
            },
            {
              "key": "cos_instance_crn",
              "description": "The CRN of the Cloud Object Storage instance."
            },
            {
              "key": "en_crn",
              "description": "The CRN of the Event Notifications instance."
            },
            {
              "key": "cloud_logs_crn",
              "description": "The CRN of the provisioned Cloud Logs instance."
            },
            {
              "key": "scc_workload_protection_crn",
              "description": "Security and Compliance Center Workload Protection instance CRN."
            }
          ],
          "install_type": "fullstack",
          "release_notes_url": "https://cloud.ibm.com/docs/security-hub?topic=security-hub-release-notes",
          "ignore_readme": true,
          "dependency_version_2": true
        }
      ]
    }
  ]
}
